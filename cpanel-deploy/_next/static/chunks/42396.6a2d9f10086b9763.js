(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42396],{7599:(e,t,i)=>{var s="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==i.g&&i.g,r=function(){function e(){this.fetch=!1,this.DOMException=s.DOMException}return e.prototype=s,new e}();!function(e){!function(t){var s=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==i.g&&i.g||{},r={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function u(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function d(e){var t=new FileReader,i=u(t);return t.readAsArrayBuffer(e),i}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;r.arrayBuffer&&r.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e)}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(r.blob)return this.blob().then(d);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,i,s,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,i=u(t=new FileReader),r=(s=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?s[1]:"utf-8",t.readAsText(e,r),i;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),i=Array(t.length),s=0;s<t.length;s++)i[s]=String.fromCharCode(t[s]);return i.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},r.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=o(e),t=c(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},l.prototype.delete=function(e){delete this.map[o(e)]},l.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},l.prototype.set=function(e,t){this.map[o(e)]=c(t)},l.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),h(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),h(e)},r.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var v=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function y(e,t){if(!(this instanceof y))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,n=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new l(t.headers)),this.method=(r=(i=t.method||this.method||"GET").toUpperCase(),v.indexOf(r)>-1?r:i),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in s)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),s=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(s),decodeURIComponent(r))}}),t}function g(e,t){if(!(this instanceof g))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var P=[301,302,303,307,308];g.redirect=function(e,t){if(-1===P.indexOf(t))throw RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},t.DOMException=s.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var i=Error(e);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,i){return new Promise(function(n,a){var h=new y(e,i);if(h.signal&&h.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function u(){p.abort()}if(p.onload=function(){var e,t,i={statusText:p.statusText,headers:(e=p.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var i=e.split(":"),s=i.shift().trim();if(s){var r=i.join(":").trim();try{t.append(s,r)}catch(e){console.warn("Response "+e.message)}}}),t)};0===h.url.indexOf("file://")&&(p.status<200||p.status>599)?i.status=200:i.status=p.status,i.url="responseURL"in p?p.responseURL:i.headers.get("X-Request-URL");var s="response"in p?p.response:p.responseText;setTimeout(function(){n(new g(s,i))},0)},p.onerror=function(){setTimeout(function(){a(TypeError("Network request failed"))},0)},p.ontimeout=function(){setTimeout(function(){a(TypeError("Network request timed out"))},0)},p.onabort=function(){setTimeout(function(){a(new t.DOMException("Aborted","AbortError"))},0)},p.open(h.method,function(e){try{return""===e&&s.location.href?s.location.href:e}catch(t){return e}}(h.url),!0),"include"===h.credentials?p.withCredentials=!0:"omit"===h.credentials&&(p.withCredentials=!1),"responseType"in p&&(r.blob?p.responseType="blob":r.arrayBuffer&&(p.responseType="arraybuffer")),i&&"object"==typeof i.headers&&!(i.headers instanceof l||s.Headers&&i.headers instanceof s.Headers)){var d=[];Object.getOwnPropertyNames(i.headers).forEach(function(e){d.push(o(e)),p.setRequestHeader(e,c(i.headers[e]))}),h.headers.forEach(function(e,t){-1===d.indexOf(t)&&p.setRequestHeader(t,e)})}else h.headers.forEach(function(e,t){p.setRequestHeader(t,e)});h.signal&&(h.signal.addEventListener("abort",u),p.onreadystatechange=function(){4===p.readyState&&h.signal.removeEventListener("abort",u)}),p.send(void 0===h._bodyInit?null:h._bodyInit)})}w.polyfill=!0,s.fetch||(s.fetch=w,s.Headers=l,s.Request=y,s.Response=g),t.Headers=l,t.Request=y,t.Response=g,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=s.fetch?s:r;(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t},42396:(e,t,i)=>{"use strict";i.d(t,{l:()=>th,A:()=>tc});var s=i(51254),r=i(47065),n=i(19655),a=i(40662),o=i.n(a),c=i(7599),h=i.n(c),l=i(71075),p=i(75086),u=Object.defineProperty,d=Object.defineProperties,f=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,i)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,g=(e,t)=>{for(var i in t||(t={}))v.call(t,i)&&b(e,i,t[i]);if(m)for(var i of m(t))y.call(t,i)&&b(e,i,t[i]);return e},P=(e,t)=>d(e,f(t));let w={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class C{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new a.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,p.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{let t=(0,l.h)(e),i=await (await h()(this.url,P(g({},w),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!(0,p.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(Error("HTTP connection is missing or invalid"));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=(0,l.h)({id:1,jsonrpc:"2.0",method:"test",params:[]});await h()(e,P(g({},w),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,l.j)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let i=this.parseError(t),s=i.message||i.toString(),r=(0,p.formatJsonRpcError)(e,s);this.events.emit("payload",r)}parseError(e,t=this.url){return(0,p.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}var O=i(77226),I=i(44134).hp;let E="error",A="wc@2:universal_provider:",j="https://rpc.walletconnect.org/v1/",H="generic",D=`${j}bundler`,$={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function S(){}function _(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function N(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function q(e){return"object"==typeof e&&null!==e}function T(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function R(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let x="[object String]",F="[object Number]",U="[object Boolean]",B="[object Arguments]";function k(e,t,i,s=new Map,r){let n=r?.(e,t,i,s);if(null!=n)return n;if(_(e))return e;if(s.has(e))return s.get(e);if(Array.isArray(e)){let t=Array(e.length);s.set(e,t);for(let n=0;n<e.length;n++)t[n]=k(e[n],n,i,s,r);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[n,a]of(s.set(e,t),e))t.set(n,k(a,n,i,s,r));return t}if(e instanceof Set){let t=new Set;for(let n of(s.set(e,t),e))t.add(k(n,void 0,i,s,r));return t}if("u">typeof I&&I.isBuffer(e))return e.subarray();if(N(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);s.set(e,t);for(let n=0;n<e.length;n++)t[n]=k(e[n],n,i,s,r);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return s.set(e,t),M(t,e,i,s,r),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return s.set(e,t),M(t,e,i,s,r),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return s.set(e,t),M(t,e,i,s,r),t}if(e instanceof Error){let t=new e.constructor;return s.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,M(t,e,i,s,r),t}if("object"==typeof e&&function(e){switch(R(e)){case B:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case U:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case F:case"[object Object]":case"[object RegExp]":case"[object Set]":case x:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return s.set(e,t),M(t,e,i,s,r),t}return e}function M(e,t,i=e,s,r){let n=[...Object.keys(t),...T(t)];for(let a=0;a<n.length;a++){let o=n[a],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=k(t[o],o,i,s,r))}}function L(e){var t;return t=(t,i,s,r)=>{let n=void 0;if(null!=n)return n;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case F:case x:case U:{let t=new e.constructor(e?.valueOf());return M(t,e),t}case B:{let t={};return M(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}},k(e,void 0,e,new Map,t)}function G(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===R(e)}var J=Object.defineProperty,z=Object.defineProperties,V=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Y=(e,t,i)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Z=(e,t)=>{for(var i in t||(t={}))K.call(t,i)&&Y(e,i,t[i]);if(W)for(var i of W(t))X.call(t,i)&&Y(e,i,t[i]);return e},Q=(e,t)=>z(e,V(t));function ee(e,t,i){var s;let n=(0,r._Yb)(e);return(null==(s=t.rpcMap)?void 0:s[n.reference])||`${j}?chainId=${n.namespace}:${n.reference}&projectId=${i}`}function et(e){return e.includes(":")?e.split(":")[1]:e}function ei(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function es(e={},t={}){return function(e,...t){return function(e,...t){let i=t.slice(0,-1),s=t[t.length-1],r=e;for(let e=0;e<i.length;e++)r=function e(t,i,s,r){if(_(t)&&(t=Object(t)),null==i||"object"!=typeof i)return t;if(r.has(i))return function(e){if(_(e))return e;if(Array.isArray(e)||N(e)||e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);let t=Object.getPrototypeOf(e),i=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new i(e);if(e instanceof RegExp){let t=new i(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new i(e.buffer.slice(0));if(e instanceof Error){let t=new i(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}return"u">typeof File&&e instanceof File?new i([e],e.name,{type:e.type,lastModified:e.lastModified}):"object"==typeof e?Object.assign(Object.create(t),e):e}(r.get(i));if(r.set(i,t),Array.isArray(i)){i=i.slice();for(let e=0;e<i.length;e++)i[e]=i[e]??void 0}let n=[...Object.keys(i),...T(i)];for(let a=0;a<n.length;a++){let o=n[a],c=i[o],h=t[o];if(G(c)&&(c={...c}),G(h)&&(h={...h}),"u">typeof I&&I.isBuffer(c)&&(c=L(c)),Array.isArray(c))if("object"==typeof h&&null!=h){let e=[],t=Reflect.ownKeys(h);for(let i=0;i<t.length;i++){let s=t[i];e[s]=h[s]}h=e}else h=[];let l=s(h,c,o,t,i,r);null!=l?t[o]=l:Array.isArray(c)||q(h)&&q(c)?t[o]=e(h,c,s,r):null==h&&function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(c)?t[o]=e({},c,s,r):null==h&&N(c)?t[o]=L(c):(void 0===h||void 0!==c)&&(t[o]=c)}return t}(r,i[e],s,new Map);return r}(e,...t,S)}(er(e),er(t))}function er(e){var t,i,s,n;let a={};if(!(0,r.aF0)(e))return a;for(let[o,c]of Object.entries(e)){let e=(0,r.nWe)(o)?[o]:c.chains,h=c.methods||[],l=c.events||[],p=c.rpcMap||{},u=(0,r.kob)(o);a[u]=Q(Z(Z({},a[u]),c),{chains:(0,r.TRk)(e,null==(t=a[u])?void 0:t.chains),methods:(0,r.TRk)(h,null==(i=a[u])?void 0:i.methods),events:(0,r.TRk)(l,null==(s=a[u])?void 0:s.events),rpcMap:Z(Z({},p),null==(n=a[u])?void 0:n.rpcMap)})}return a}function en(e){return e.includes(":")?e.split(":")[2]:e}function ea(e){let t={};for(let[i,s]of Object.entries(e)){let e=s.methods||[],n=s.events||[],a=s.accounts||[],o=(0,r.nWe)(i)?[i]:s.chains?s.chains:ei(s.accounts);t[i]={chains:o,methods:e,events:n,accounts:a}}return t}function eo(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let ec={},eh=e=>ec[e],el=(e,t)=>{ec[e]=t};var ep=Object.defineProperty,eu=(e,t,i)=>t in e?ep(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ed=(e,t,i)=>eu(e,"symbol"!=typeof t?t+"":t,i);class ef{constructor(e){ed(this,"name","polkadot"),ed(this,"client"),ed(this,"httpProviders"),ed(this,"events"),ed(this,"namespace"),ed(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let s=et(t);e[s]=this.createHttpProvider(s,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new O.F(new C(i,eh("disableProviderPing")))}}var em=Object.defineProperty,ev=Object.defineProperties,ey=Object.getOwnPropertyDescriptors,eb=Object.getOwnPropertySymbols,eg=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,ew=(e,t,i)=>t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eC=(e,t)=>{for(var i in t||(t={}))eg.call(t,i)&&ew(e,i,t[i]);if(eb)for(var i of eb(t))eP.call(t,i)&&ew(e,i,t[i]);return e},eO=(e,t)=>ev(e,ey(t)),eI=(e,t,i)=>ew(e,"symbol"!=typeof t?t+"":t,i);class eE{constructor(e){eI(this,"name","eip155"),eI(this,"client"),eI(this,"chainId"),eI(this,"namespace"),eI(this,"httpProviders"),eI(this,"events"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let i=t||ee(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new O.F(new C(i,eh("disableProviderPing")))}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let s=parseInt(et(t));e[s]=this.createHttpProvider(s,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let s=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",r=parseInt(s=s.startsWith("0x")?s:`0x${s}`,16);if(this.isChainApproved(r))this.setDefaultChain(`${r}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:null==(i=this.namespace.chains)?void 0:i[0]}),this.setDefaultChain(`${r}`);else throw Error(`Failed to switch to chain 'eip155:${r}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,s;let r=null==(i=null==(t=e.request)?void 0:t.params)?void 0:i[0];if(!r)throw Error("Missing address parameter in `wallet_getCapabilities` request");let n=this.client.session.get(e.topic),a=(null==(s=n?.sessionProperties)?void 0:s.capabilities)||{};if(null!=a&&a[r])return a?.[r];let o=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:eO(eC({},n.sessionProperties||{}),{capabilities:eO(eC({},a||{}),{[r]:o})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return o}async getCallStatus(e){var t,i;let s=this.client.session.get(e.topic),r=null==(t=s.sessionProperties)?void 0:t.bundler_name;if(r){let t=this.getBundlerUrl(e.chainId,r);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let n=null==(i=s.sessionProperties)?void 0:i.bundler_url;if(n)try{return await this.getUserOperationReceipt(n,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,n)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var i;let s=new URL(e),r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,p.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(i=t.request.params)?void 0:i[0]]))});if(!r.ok)throw Error(`Failed to fetch user operation receipt - ${r.status}`);return await r.json()}getBundlerUrl(e,t){return`${D}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var eA=Object.defineProperty,ej=(e,t,i)=>t in e?eA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eH=(e,t,i)=>ej(e,"symbol"!=typeof t?t+"":t,i);class eD{constructor(e){eH(this,"name","solana"),eH(this,"client"),eH(this,"httpProviders"),eH(this,"events"),eH(this,"namespace"),eH(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let s=et(t);e[s]=this.createHttpProvider(s,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new O.F(new C(i,eh("disableProviderPing")))}}var e$=Object.defineProperty,eS=(e,t,i)=>t in e?e$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,e_=(e,t,i)=>eS(e,"symbol"!=typeof t?t+"":t,i);class eN{constructor(e){e_(this,"name","cosmos"),e_(this,"client"),e_(this,"httpProviders"),e_(this,"events"),e_(this,"namespace"),e_(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let s=et(t);e[s]=this.createHttpProvider(s,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new O.F(new C(i,eh("disableProviderPing")))}}var eq=Object.defineProperty,eT=(e,t,i)=>t in e?eq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eR=(e,t,i)=>eT(e,"symbol"!=typeof t?t+"":t,i);class ex{constructor(e){eR(this,"name","algorand"),eR(this,"client"),eR(this,"httpProviders"),eR(this,"events"),eR(this,"namespace"),eR(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let i=t||ee(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new O.F(new C(i,eh("disableProviderPing")))}}var eF=Object.defineProperty,eU=(e,t,i)=>t in e?eF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eB=(e,t,i)=>eU(e,"symbol"!=typeof t?t+"":t,i);class ek{constructor(e){eB(this,"name","cip34"),eB(this,"client"),eB(this,"httpProviders"),eB(this,"events"),eB(this,"namespace"),eB(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let i=this.getCardanoRPCUrl(t),s=et(t);e[s]=this.createHttpProvider(s,i)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||this.getCardanoRPCUrl(e);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new O.F(new C(i,eh("disableProviderPing")))}}var eM=Object.defineProperty,eL=(e,t,i)=>t in e?eM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eG=(e,t,i)=>eL(e,"symbol"!=typeof t?t+"":t,i);class eJ{constructor(e){eG(this,"name","elrond"),eG(this,"client"),eG(this,"httpProviders"),eG(this,"events"),eG(this,"namespace"),eG(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let s=et(t);e[s]=this.createHttpProvider(s,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new O.F(new C(i,eh("disableProviderPing")))}}var ez=Object.defineProperty,eV=(e,t,i)=>t in e?ez(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eW=(e,t,i)=>eV(e,"symbol"!=typeof t?t+"":t,i);class eK{constructor(e){eW(this,"name","multiversx"),eW(this,"client"),eW(this,"httpProviders"),eW(this,"events"),eW(this,"namespace"),eW(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let s=et(t);e[s]=this.createHttpProvider(s,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new O.F(new C(i,eh("disableProviderPing")))}}var eX=Object.defineProperty,eY=(e,t,i)=>t in e?eX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eZ=(e,t,i)=>eY(e,"symbol"!=typeof t?t+"":t,i);class eQ{constructor(e){eZ(this,"name","near"),eZ(this,"client"),eZ(this,"httpProviders"),eZ(this,"events"),eZ(this,"namespace"),eZ(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let i=t||ee(`${this.name}:${e}`,this.namespace);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace);return typeof i>"u"?void 0:new O.F(new C(i,eh("disableProviderPing")))}}var e0=Object.defineProperty,e1=(e,t,i)=>t in e?e0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,e2=(e,t,i)=>e1(e,"symbol"!=typeof t?t+"":t,i);class e3{constructor(e){e2(this,"name","tezos"),e2(this,"client"),e2(this,"httpProviders"),e2(this,"events"),e2(this,"namespace"),e2(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let i=t||ee(`${this.name}:${e}`,this.namespace);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace);return typeof i>"u"?void 0:new O.F(new C(i))}}var e5=Object.defineProperty,e6=(e,t,i)=>t in e?e5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,e9=(e,t,i)=>e6(e,"symbol"!=typeof t?t+"":t,i);class e8{constructor(e){e9(this,"name",H),e9(this,"client"),e9(this,"httpProviders"),e9(this,"events"),e9(this,"namespace"),e9(this,"chainId"),this.namespace=e.namespace,this.events=eh("events"),this.client=eh("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit($.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let i={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{let t=(0,r._Yb)(e);i[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)}),i}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||ee(e,this.namespace,this.client.core.projectId);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new O.F(new C(i,eh("disableProviderPing")))}}var e4=Object.defineProperty,e7=Object.defineProperties,te=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,ti=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,tr=(e,t,i)=>t in e?e4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tn=(e,t)=>{for(var i in t||(t={}))ti.call(t,i)&&tr(e,i,t[i]);if(tt)for(var i of tt(t))ts.call(t,i)&&tr(e,i,t[i]);return e},ta=(e,t)=>e7(e,te(t)),to=(e,t,i)=>tr(e,"symbol"!=typeof t?t+"":t,i);class tc{constructor(e){to(this,"client"),to(this,"namespaces"),to(this,"optionalNamespaces"),to(this,"sessionProperties"),to(this,"scopedProperties"),to(this,"events",new(o())),to(this,"rpcProviders",{}),to(this,"session"),to(this,"providerOpts"),to(this,"logger"),to(this,"uri"),to(this,"disableProviderPing",!1),this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,n.h6)((0,n.iP)({level:e?.logger||E})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new tc(e);return await t.initialize(),t}async request(e,t,i){let[s,r]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(s).request({request:tn({},e),chainId:`${s}:${r}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,s){let r=new Date().getTime();this.request(e,i,s).then(e=>t(null,(0,p.formatJsonRpcResult)(r,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:(0,r.Hjj)("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:i,response:s}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));let r=await s();if(this.session=r.session,this.session){let e=ea(this.session.namespaces);this.namespaces=es(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return r}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let s=await i();this.session=s;let r=ea(s.namespaces);return this.namespaces=es(this.namespaces,r),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[i,s]=this.validateChain(e),r=this.getProvider(i);r.name===H?r.setDefaultChain(`${i}:${s}`,t):r.setDefaultChain(s,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if((0,r.OP1)(t)){for(let i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await s.Ay.init({core:this.providerOpts.core,logger:this.providerOpts.logger||E,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(i){throw this.logger.error("Failed to get session",i),Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{let e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>(0,r.kob)(e)))];el("client",this.client),el("events",this.events),el("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let i=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!i.length)return[];let s=[];return i.forEach(e=>{let i=t.namespaces[e].accounts;s.push(...i)}),s}(e,this.session),i=ei(t),s=ta(tn({},es(this.namespaces,this.optionalNamespaces)[e]),{accounts:t,chains:i});switch(e){case"eip155":this.rpcProviders[e]=new eE({namespace:s});break;case"algorand":this.rpcProviders[e]=new ex({namespace:s});break;case"solana":this.rpcProviders[e]=new eD({namespace:s});break;case"cosmos":this.rpcProviders[e]=new eN({namespace:s});break;case"polkadot":this.rpcProviders[e]=new ef({namespace:s});break;case"cip34":this.rpcProviders[e]=new ek({namespace:s});break;case"elrond":this.rpcProviders[e]=new eJ({namespace:s});break;case"multiversx":this.rpcProviders[e]=new eK({namespace:s});break;case"near":this.rpcProviders[e]=new eQ({namespace:s});break;case"tezos":this.rpcProviders[e]=new e3({namespace:s});break;default:this.rpcProviders[H]?this.rpcProviders[H].updateNamespace(s):this.rpcProviders[H]=new e8({namespace:s})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;let{topic:i}=e;i===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;let{params:i,topic:s}=e;if(s!==(null==(t=this.session)?void 0:t.topic))return;let{event:n}=i;if("accountsChanged"===n.name){let e=n.data;e&&(0,r.OP1)(e)&&this.events.emit("accountsChanged",e.map(en))}else if("chainChanged"===n.name){let e=i.chainId,t=i.event.data,s=(0,r.kob)(e),n=eo(e)!==eo(t)?`${s}:${eo(t)}`:e;this.onChainChanged(n)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i,s;if(e!==(null==(i=this.session)?void 0:i.topic))return;let{namespaces:r}=t,n=null==(s=this.client)?void 0:s.session.get(e);this.session=ta(tn({},n),{namespaces:r}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",ta(tn({},(0,r.Hjj)("USER_DISCONNECTED")),{data:e.topic})))}),this.on($.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[H]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:i,sessionProperties:s,scopedProperties:r}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.scopedProperties=r}validateChain(e){let[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(e=>(0,r.kob)(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];let s=(0,r.kob)(Object.keys(this.namespaces)[0]),n=this.rpcProviders[s].getDefaultChain();return[s,n]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;let[i,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(i,s),this.events.emit("chainChanged",s);let r=this.getProvider(i).getDefaultChain();t||this.getProvider(i).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:i,previousChainId:r,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:i}){var s,n;try{if(t===i)return;let a=null==(n=null==(s=this.session)?void 0:s.namespaces[e])?void 0:n.accounts;if(!a)return;let o=a.filter(e=>e.includes(`${i}:`)).map(en);if(!(0,r.OP1)(o))return;this.events.emit("accountsChanged",o)}catch(e){this.logger.warn("Failed to emit accountsChanged on chain change",e)}}updateNamespaceChain(e,t){if(!this.namespaces)return;let i=this.namespaces[e]?e:`${e}:${t}`;this.namespaces[i]?this.namespaces[i]&&(this.namespaces[i].defaultChain=t):this.namespaces[i]={chains:[],methods:[],events:[],defaultChain:t}}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var i;let s=(null==(i=this.session)?void 0:i.topic)||"";await this.client.core.storage.setItem(`${A}/${e}${s}`,t)}async getFromStore(e){var t;let i=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${A}/${e}${i}`)}async deleteFromStore(e){var t;let i=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${A}/${e}${i}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;for(let e of(await this.client.core.storage.getKeys()))e.startsWith(A)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}let th=tc}}]);