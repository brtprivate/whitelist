"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3348,99134],{3348:(n,e,t)=>{t.r(e),t.d(e,{concatHex:()=>r});var a=t(56484);function r(n){return a.xW(...n)}},17040:(n,e,t)=>{t.d(e,{EQ:()=>o,HF:()=>u,VF:()=>c});var a=t(45858),r=t(88333),i=t(10461),s=t(99443);function o(n,e="hex"){let t=function n(e){return Array.isArray(e)?function(n){let e=n.reduce((n,e)=>n+e.length,0),t=y(e);return{length:e<=55?1+e:1+t+e,encode(a){for(let{encode:r}of(e<=55?a.pushByte(192+e):(a.pushByte(247+t),1===t?a.pushUint8(e):2===t?a.pushUint16(e):3===t?a.pushUint24(e):a.pushUint32(e)),n))r(a)}}}(e.map(e=>n(e))):function(n){let e="string"==typeof n?(0,i.aT)(n):n,t=y(e.length);return{length:1===e.length&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length,encode(n){1===e.length&&e[0]<128||(e.length<=55?n.pushByte(128+e.length):(n.pushByte(183+t),1===t?n.pushUint8(e.length):2===t?n.pushUint16(e.length):3===t?n.pushUint24(e.length):n.pushUint32(e.length))),n.pushBytes(e)}}}(e)}(n),a=(0,r.l)(new Uint8Array(t.length));return(t.encode(a),"hex"===e)?(0,s.My)(a.bytes):a.bytes}function u(n,e="bytes"){return o(n,e)}function c(n,e="hex"){return o(n,e)}function y(n){if(n<256)return 1;if(n<65536)return 2;if(n<0x1000000)return 3;if(n<0x100000000)return 4;throw new a.C("Length is too large.")}},40651:(n,e,t)=>{t.d(e,{Dg:()=>r,Xf:()=>i});var a=t(23471);function r(n){if(["string","number"].includes(typeof n)&&!Number.isInteger(Number(n)))throw Error(`Expected value to be an integer to convert to a bigint, got ${n} of type ${typeof n}`);return n instanceof Uint8Array?BigInt((0,a.EY)(n)):BigInt(n)}let i=(n,e)=>"bigint"==typeof n?e(n):Array.isArray(n)?n.map(n=>i(n,e)):n&&"object"==typeof n?Object.fromEntries(Object.entries(n).map(([n,t])=>[n,i(t,e)])):n},48983:(n,e,t)=>{t.d(e,{s:()=>o});var a=t(2589),r=t(35649),i=t(10461),s=t(99443);function o(n,e){let t=(0,a.sc)((0,r.q)(n,{strict:!1})?(0,i.ZJ)(n):n);return"bytes"===(e||"hex")?t:(0,s.nj)(t)}},53234:(n,e,t)=>{t.d(e,{B:()=>a});async function a(n,e){return await n({method:"eth_sendRawTransaction",params:[e]})}},60414:(n,e,t)=>{t.d(e,{$K:()=>p,$R:()=>nC,$n:()=>W,AN:()=>F,Ao:()=>nV,Aq:()=>ni,Au:()=>nh,CO:()=>Q,DW:()=>nl,EA:()=>n_,Fg:()=>c,Fy:()=>ng,GS:()=>N,Gq:()=>V,HS:()=>nU,HX:()=>nB,Hb:()=>M,Ht:()=>nf,J3:()=>O,JQ:()=>nn,Jn:()=>nm,KF:()=>nG,KV:()=>l,Kt:()=>g,M7:()=>X,MV:()=>y,Ng:()=>Y,OU:()=>G,OV:()=>ns,PI:()=>$,Pg:()=>n$,QT:()=>nq,Qm:()=>a,SS:()=>nE,ST:()=>H,T:()=>Z,T_:()=>nJ,Uo:()=>nt,V4:()=>m,Vq:()=>nP,W:()=>b,XI:()=>nw,Y_:()=>nF,Yl:()=>k,Yx:()=>J,ZT:()=>f,_u:()=>i,aS:()=>T,ap:()=>o,av:()=>ny,bG:()=>s,bi:()=>R,cI:()=>nb,d:()=>w,di:()=>no,dz:()=>C,eD:()=>d,f4:()=>nI,gD:()=>_,gs:()=>nT,h2:()=>S,he:()=>r,iB:()=>nD,ip:()=>nk,jJ:()=>nA,jY:()=>na,j_:()=>nc,lc:()=>nS,lk:()=>h,ln:()=>x,mf:()=>I,nc:()=>q,o:()=>v,o0:()=>np,oU:()=>u,ol:()=>D,pC:()=>j,pc:()=>nM,po:()=>nz,q1:()=>z,qC:()=>nj,r_:()=>A,sD:()=>L,sb:()=>nd,tm:()=>nx,u8:()=>nv,uj:()=>E,uq:()=>nr,us:()=>nu,vl:()=>ne,w3:()=>nL,wC:()=>K,x1:()=>P,xP:()=>B,xw:()=>U,zH:()=>nH});let a=2n**(8n-1n)-1n,r=2n**(16n-1n)-1n,i=2n**(24n-1n)-1n,s=2n**(32n-1n)-1n,o=2n**(40n-1n)-1n,u=2n**(48n-1n)-1n,c=2n**(56n-1n)-1n,y=2n**(64n-1n)-1n,p=2n**(72n-1n)-1n,g=2n**(80n-1n)-1n,l=2n**(88n-1n)-1n,h=2n**(96n-1n)-1n,m=2n**(104n-1n)-1n,d=2n**(112n-1n)-1n,f=2n**(120n-1n)-1n,x=2n**(128n-1n)-1n,b=2n**(136n-1n)-1n,w=2n**(144n-1n)-1n,v=2n**(152n-1n)-1n,B=2n**(160n-1n)-1n,P=2n**(168n-1n)-1n,_=2n**(176n-1n)-1n,j=2n**(184n-1n)-1n,I=2n**(192n-1n)-1n,T=2n**(200n-1n)-1n,D=2n**(208n-1n)-1n,A=2n**(216n-1n)-1n,E=2n**(224n-1n)-1n,U=2n**(232n-1n)-1n,F=2n**(240n-1n)-1n,G=2n**(248n-1n)-1n,C=2n**(256n-1n)-1n,L=-(2n**(8n-1n)),$=-(2n**(16n-1n)),H=-(2n**(24n-1n)),S=-(2n**(32n-1n)),k=-(2n**(40n-1n)),J=-(2n**(48n-1n)),q=-(2n**(56n-1n)),z=-(2n**(64n-1n)),M=-(2n**(72n-1n)),V=-(2n**(80n-1n)),N=-(2n**(88n-1n)),O=-(2n**(96n-1n)),Z=-(2n**(104n-1n)),Q=-(2n**(112n-1n)),W=-(2n**(120n-1n)),Y=-(2n**(128n-1n)),K=-(2n**(136n-1n)),R=-(2n**(144n-1n)),X=-(2n**(152n-1n)),nn=-(2n**(160n-1n)),ne=-(2n**(168n-1n)),nt=-(2n**(176n-1n)),na=-(2n**(184n-1n)),nr=-(2n**(192n-1n)),ni=-(2n**(200n-1n)),ns=-(2n**(208n-1n)),no=-(2n**(216n-1n)),nu=-(2n**(224n-1n)),nc=-(2n**(232n-1n)),ny=-(2n**(240n-1n)),np=-(2n**(248n-1n)),ng=-(2n**(256n-1n)),nl=2n**8n-1n,nh=2n**16n-1n,nm=2n**24n-1n,nd=2n**32n-1n,nf=2n**40n-1n,nx=2n**48n-1n,nb=2n**56n-1n,nw=2n**64n-1n,nv=2n**72n-1n,nB=2n**80n-1n,nP=2n**88n-1n,n_=2n**96n-1n,nj=2n**104n-1n,nI=2n**112n-1n,nT=2n**120n-1n,nD=2n**128n-1n,nA=2n**136n-1n,nE=2n**144n-1n,nU=2n**152n-1n,nF=2n**160n-1n,nG=2n**168n-1n,nC=2n**176n-1n,nL=2n**184n-1n,n$=2n**192n-1n,nH=2n**200n-1n,nS=2n**208n-1n,nk=2n**216n-1n,nJ=2n**224n-1n,nq=2n**232n-1n,nz=2n**240n-1n,nM=2n**248n-1n,nV=2n**256n-1n},99134:(n,e,t)=>{t.d(e,{getZkGasFees:()=>j,f:()=>_,sendEip712Transaction:()=>B,a:()=>P});var a=t(17040),r=t(10461),i=t(53234),s=t(92942),o=t(99232),u=t(40651),c=t(3348),y=t(23471),p=t(94),g=t(8121),l=t(81647),h=t(15693),m=t(48983);let d=32n*t(60414).Au;var f=t(45858);class x extends f.C{constructor({givenLength:n,maxBytecodeSize:e}){super(`Bytecode cannot be longer than ${e} bytes. Given length: ${n}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class b extends f.C{constructor({givenLengthInWords:n}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${n}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class w extends f.C{constructor({givenLength:n}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${n}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}let v=n=>{let e=function(n){let{gas:e,nonce:t,to:a,from:i,value:s,maxFeePerGas:o,maxPriorityFeePerGas:u,paymaster:c,paymasterInput:p,gasPerPubdata:g,data:l,factoryDeps:f}=n;return{txType:113n,from:BigInt(i),to:a?BigInt(a):0n,gasLimit:e??0n,gasPerPubdataByteLimit:g??50000n,maxFeePerGas:o??0n,maxPriorityFeePerGas:u??0n,paymaster:c?BigInt(c):0n,nonce:t?BigInt(t):0n,value:s??0n,data:l||"0x0",factoryDeps:f?.map(n=>(0,y.nj)(function(n){let e=(0,r.ZJ)(n);if(e.length%32!=0)throw new w({givenLength:e.length});if(e.length>d)throw new x({givenLength:e.length,maxBytecodeSize:d});let t=(0,m.s)(e),a=(0,r.ZJ)(t),i=e.length/32;if(i%2==0)throw new b({givenLengthInWords:i});let s=(0,r.ZJ)(i),o=(0,h.eV)(s,{size:2}),u=new Uint8Array([1,0]);return a.set(u,0),a.set(o,2),a}(n)))??[],paymasterInput:p||"0x"}}(n);return{domain:{name:"zkSync",version:"2",chainId:n.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:e}};async function B(n){let{account:e,transaction:t}=n,a=await _(n),r=await P({account:e,eip712Transaction:a,chainId:t.chain.id}),o=(0,s.getRpcClient)(t);return{transactionHash:await (0,i.B)(o,r),chain:t.chain,client:t.client}}async function P(n){let{account:e,eip712Transaction:t,chainId:r}=n,i=v(t),s=await e.signTypedData({...i});var o={...t,chainId:r,customSignature:s};let{chainId:u,gas:p,nonce:g,to:l,from:h,value:m,maxFeePerGas:d,maxPriorityFeePerGas:f,customSignature:x,factoryDeps:b,paymaster:w,paymasterInput:B,gasPerPubdata:P,data:_}=o,j=[g?(0,y.nj)(g):"0x",f?(0,y.nj)(f):"0x",d?(0,y.nj)(d):"0x",p?(0,y.nj)(p):"0x",l??"0x",m?(0,y.nj)(m):"0x",_??"0x0",(0,y.nj)(u),(0,y.nj)(""),(0,y.nj)(""),(0,y.nj)(u),h??"0x",P?(0,y.nj)(P):(0,y.nj)(50000n),b??[],x??"0x",w&&B?[w,B]:[]];return(0,c.concatHex)(["0x71",(0,a.EQ)(j)])}async function _(n){let{account:e,transaction:t}=n,{gas:a,maxFeePerGas:r,maxPriorityFeePerGas:i,gasPerPubdata:s}=await j({transaction:t,from:(0,o.bv)(e.address)});return{...await (0,l.$)({transaction:{...t,gas:a,maxFeePerGas:r,maxPriorityFeePerGas:i},from:e.address}),...t.eip712,gasPerPubdata:s,from:e.address}}async function j(n){let{transaction:e,from:t}=n,[a,r,i,o]=await Promise.all([(0,p.r)(e.gas),(0,p.r)(e.maxFeePerGas),(0,p.r)(e.maxPriorityFeePerGas),(0,p.r)(e.eip712)]),c=o?.gasPerPubdata;if(void 0===a||void 0===r||void 0===i){let n=(0,s.getRpcClient)(e),o=await I({transaction:e,from:t}),p=await n({method:"zks_estimateFee",params:[(0,u.Xf)(o,y.nj)]});a=2n*(0,u.Dg)(p.gas_limit),r=2n*(0,u.Dg)(p.max_fee_per_gas),i=(0,u.Dg)(p.max_priority_fee_per_gas)||1n,(c=2n*(0,u.Dg)(p.gas_per_pubdata_limit))<50000n&&(c=50000n)}return{gas:a,maxFeePerGas:r,maxPriorityFeePerGas:i,gasPerPubdata:c}}async function I(n){let{transaction:e,from:t}=n,[a,i,s,o]=await Promise.all([(0,g.encode)(e),(0,p.r)(e.to),(0,p.r)(e.value),(0,p.r)(e.eip712)]),u=o?.gasPerPubdata;return{from:t,to:i,data:a,value:s,gasPerPubdata:u,eip712Meta:{...o,gasPerPubdata:u||50000n,factoryDeps:o?.factoryDeps?.map(n=>Array.from((0,r.aT)(n)))},type:"0x71"}}}}]);